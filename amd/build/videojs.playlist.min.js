define(["media_videojs/video-lazy"],function(a){a.plugin("playlist",function(a){for(var b=this.el().id,c=document.querySelectorAll("#"+b+"-vjs-playlist .vjs-track"),d=c.length,e=this,f=(c[0],0),g=!0,h=a.onTrackSelected,i=0;i<d;i++)c[i].onclick=function(){j(this)};"undefined"!=typeof a.continuous&&1!=a.continuous||e.on("ended",function(){f++,f>=d&&(f=0),c[f].click()});var j=function(a){for(var b=a.getAttribute("data-src"),f=e.remoteTextTracks(),i=0;i<f.length;i++)e.removeRemoteTextTrack(f[i]);var j=new Object;if(j.kind="captions",j.mode="showing",j.label="english",j.srclang="en",j["default"]=!0,b.includes(".mp4")){var k=b.replace("rtmp","http");k=k.replace("&mp4","_definst_/mp4"),k=k.replace(".mp4",".mp4/playlist.m3u8"),e.src([{type:"rtmp/mp4",src:b},{type:"video/mp4",src:k}]);var l=k.replace("mp4:","");l=l.replace("mp4/playlist.m3u8","vtt"),j.src=l,e.addRemoteTextTrack(j)}else if(b.includes(".flv")){var k=b.replace("rtmp","http");k=k.replace("&flv","_definst_/mp4"),k=k.replace(".flv",".flv/playlist.m3u8"),e.src([{type:"rtmp/x-flv",src:b},{type:"video/mp4",src:k}]);var l=k.replace("mp4:","");l=l.replace("flv/playlist.m3u8","vtt"),j.src=l,e.addRemoteTextTrack(j)}else if(b.includes(".f4v")){var k=b.replace("rtmp","http");k=k.replace("&mp4","_definst_/mp4"),k=k.replace(".f4v",".f4v/playlist.m3u8"),e.src([{type:"rtmp/mp4",src:b},{type:"video/mp4",src:k}]);var l=k.replace("mp4:","");l=l.replace("f4v/playlist.m3u8","vtt"),j.src=l,e.addRemoteTextTrack(j)}else if(b.includes(".mp3")){var k=b.replace("rtmp","http");k=k.replace("&mp3","_definst_/mp3"),k=k.replace(".mp3",".mp3/playlist.m3u8"),e.src([{type:"rtmp/mp3",src:b},{type:"audio/mp3",src:k}]);var l=k.replace("mp3:","");l=l.replace("mp3/playlist.m3u8","vtt"),j.src=l,e.addRemoteTextTrack(j)}g&&e.play();for(var i=0;i<d;i++)c[i].className.indexOf("currentTrack")!==-1&&(c[i].className=c[i].className.replace(/\bcurrentTrack\b/,"nonPlayingTrack"));a.className=a.className+" currentTrack","function"==typeof h&&h.apply(a)}});var b=document.getElementsByClassName("video-playlist"),c=b[0].id;a(c,{height:"auto",width:"400"}).ready(function(a){function b(){var a=document.getElementById(c.el().id).parentElement.offsetWidth,b=8/12;c.width(a).height(a*b)}var c=this;c.playlist({continuous:!1}),b(),window.onresize=b})});