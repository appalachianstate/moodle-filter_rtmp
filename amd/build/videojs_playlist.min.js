define(["media_videojs/video-lazy"],function(a){a.plugin("playlist",function(a){var b,c=this.el().id,d=document.getElementById(c).className;b=d.includes("fms")?".m38u":"/playlist.m3u8";for(var e=document.querySelectorAll("#"+c+"-vjs-playlist .vjs-track"),f=e.length,g=this,h=!0,i=a.onTrackSelected,j=0;j<f;j++)e[j].onclick=function(){k(this)};var k=function(a){for(var c=a.getAttribute("data-src"),d=g.remoteTextTracks(),j=0;j<d.length;j++)g.removeRemoteTextTrack(d[j]);var k=new Object;if(k.kind="captions",k.mode="showing",k.label="english",k.srclang="en",k["default"]=!0,c.includes(".mp4")){var l=c.replace("rtmp","http");l=l.replace("&mp4","_definst_/mp4"),l=l.replace(".mp4",".mp4"+b),g.src([{type:"rtmp/mp4",src:c},{type:"video/mp4",src:l}]);var m=l.replace("mp4:","");m=m.replace("mp4"+b,"vtt"),k.src=m,g.addRemoteTextTrack(k)}else if(c.includes(".flv")){var l=c.replace("rtmp","http");l=l.replace("&flv","_definst_/mp4"),l=l.replace(".flv",".flv"+b),g.src([{type:"rtmp/x-flv",src:c},{type:"video/mp4",src:l}]);var m=l.replace("mp4:","");m=m.replace("flv"+b,"vtt"),k.src=m,g.addRemoteTextTrack(k)}else if(c.includes(".f4v")){var l=c.replace("rtmp","http");l=l.replace("&mp4","_definst_/mp4"),l=l.replace(".f4v",".f4v"+b),g.src([{type:"rtmp/mp4",src:c},{type:"video/mp4",src:l}]);var m=l.replace("mp4:","");m=m.replace("f4v"+b,"vtt"),k.src=m,g.addRemoteTextTrack(k)}else if(c.includes(".mp3")){var l=c.replace("rtmp","http");l=l.replace("&mp3","_definst_/mp3"),l=l.replace(".mp3",".mp3"+b),g.src([{type:"rtmp/mp3",src:c},{type:"audio/mp3",src:l}]);var m=l.replace("mp3:","");k.src=m,g.addRemoteTextTrack(k)}h&&g.play();for(var j=0;j<f;j++)e[j].className.indexOf("currentTrack")!==-1&&(e[j].className=e[j].className.replace(/\bcurrentTrack\b/,"nonPlayingTrack"));a.className=a.className+" currentTrack","function"==typeof i&&i.apply(a)}});var b=document.getElementsByClassName("video-playlist");if(b.length>0)for(var c=0;c<b.length;c++){var d=b[c].id;a(d,{}).ready(function(a){function b(){var a=document.getElementById(c.el().id).parentElement.offsetWidth,b=8/12;c.width(a).height(a*b)}var c=this;c.playlist({continuous:!1}),b(),window.onresize=b})}});